<!DOCTYPE html>
<html lang="zh-Hans-CN"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=Edge"/><link rel="stylesheet" type="text/css" href="css/modern-norm.min.css"/><link rel="stylesheet" type="text/css" href="css/prism.min.css"/><link rel="stylesheet" type="text/css" href="css/katex.min.css"/><link rel="stylesheet" type="text/css" href="css/wolai.css"/><title>10 Cryptography - wolai 笔记</title><link rel="shortcut icon" href="data:image/svg+xml,%3Csvg xmlns=&apos;http://www.w3.org/2000/svg&apos; viewBox=&apos;0 0 800 800&apos;%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fff;%7D%3C/style%3E%3C/defs%3E%3Cg%3E%3Cpath class=&apos;cls-1&apos; d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Z&apos;/%3E%3Cpath d=&apos;M610.08,0c66,0,90,6.88,114.13,19.79a134.62,134.62,0,0,1,56,56l2.28,4.4C793.93,103,800,127.88,800,189.92V610.08l-.08,11.56c-.78,57.38-7.58,79.89-19.71,102.57a134.62,134.62,0,0,1-56,56l-4.4,2.28C697,793.93,672.12,800,610.08,800H189.92l-11.56-.08c-57.38-.78-79.89-7.58-102.57-19.71a134.62,134.62,0,0,1-56-56l-2.28-4.4C6.44,697.75.4,673.72,0,616L0,189.92c0-66,6.88-90,19.79-114.13a134.62,134.62,0,0,1,56-56l4.4-2.28C102.25,6.44,126.28.4,184,0Zm4.72,88.9H185.2L172.42,89c-32.78.62-43.68,3.24-54.71,9.14a45.84,45.84,0,0,0-19.54,19.54c-6.61,12.36-9.11,24.55-9.27,67.49V614.8L89,627.58c.62,32.78,3.24,43.68,9.14,54.71a45.84,45.84,0,0,0,19.54,19.54c12.36,6.61,24.55,9.11,67.49,9.27H610.08c46.79,0,59.41-2.44,72.21-9.28a45.84,45.84,0,0,0,19.54-19.54c6.61-12.36,9.11-24.55,9.27-67.49V189.92c0-46.79-2.44-59.41-9.28-72.21a45.84,45.84,0,0,0-19.54-19.54C669.93,91.56,657.74,89.06,614.8,88.9ZM233.33,493.33A73.34,73.34,0,1,1,160,566.67,73.35,73.35,0,0,1,233.33,493.33Z&apos;/%3E%3C/g%3E%3C/svg%3E"></link></head><body><header><div class="image"></div><div class="title"><div class="banner"><div class="icon"></div></div><div data-title="10 Cryptography" class="main-title"></div></div></header><article><h1 id="owYqy6rVfkchMQqb4BLEG2" class="wolai-block"><span class="inline-wrap">Cryptography</span></h1><ol class="wolai-block"><li id="7QLpfh3kLyicLurFXcysBS"><div class="marker"></div><span class="inline-wrap"><b>OpenSSL</b></span><span class="inline-wrap">：</span><ul class="wolai-block"><li id="qB8EuWLQNCQ7kxxKMKDRvL"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">OpenSSL 是一个广泛使用的开源库，提供加密功能和实用程序。</span></li><li id="iGm9axVMVEmyLHh7AV1MvE"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">它支持各种加密算法、数字证书和 SSL/TLS 等协议。</span></li><li id="pLwxRR6wRzxbwGimDYAsfd"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">OpenSSL 可用于生成加密密钥、创建 SSL/TLS 连接以及加密数据等任务。</span></li></ul></li><li id="54ouj1nuwGoSoJFC9CB4bk"><div class="marker"></div><span class="inline-wrap"><b>PGP（Pretty Good Privacy）</b></span><span class="inline-wrap">：</span><ul class="wolai-block"><li id="6yTfgaT6SZrBWwJSoZny19"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">PGP 是一种用于安全通信和数据存储的数据加密和解密程序。</span></li><li id="9GtWgzG5hwvo5pEpDh7Wxx"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">它结合了对称密钥和公钥密码学。</span></li><li id="eHh5fBBFLGnf6bjd2yGRw7"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">PGP 允许用户加密和签名消息、文件和电子邮件，确保机密性、完整性和真实性。</span></li></ul></li><li id="u5CuDcPPepvqNJzqaLNk9R"><div class="marker"></div><span class="inline-wrap"><b>Let&#39;s Encrypt</b></span><span class="inline-wrap">：</span><ul class="wolai-block"><li id="dvFPMu3kgR4ZWmL1hXh211"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">Let&#39;s Encrypt 是一个证书颁发机构，为网站提供免费的 SSL/TLS 证书，用于保护网站。</span></li><li id="ubkECgTo9WjMMo94iavcrQ"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">它自动化了获取、更新和安装 SSL/TLS 证书的过程。</span></li><li id="cd5aoYQSv5RDQcBxtsqvi7"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">Let&#39;s Encrypt 证书被大多数现代网络浏览器信任，可以帮助网站所有者通过 HTTPS 安全连接保护他们的连接。</span></li></ul></li></ol><h2 id="tvMy9wuHtTCvqhX19kTfKV" class="wolai-block"><span class="inline-wrap">A Brief intro to cryptography</span></h2><div id="gceEyyt9b2roGEXGKhUMte" class="wolai-block wolai-text"><div><span class="inline-wrap">需要：保护应用程序的通信</span></div></div><div id="9Dfn9GJQPrEMf5K7F979wN" class="wolai-block wolai-text"><div><span class="inline-wrap">目标：数据机密性、数据完整性、身份验证和不可否认性</span></div></div><div id="gczoQn1tGtwKscg7xZyxwJ" class="wolai-block wolai-text"><div><span class="inline-wrap">基于网络的攻击：窃听、IP<span class="jill"></span>欺骗、连接劫持和篡改</span></div></div><div id="uPKx8joPo1PY72ZwHY6yXY" class="wolai-block wolai-text"><div><span class="inline-wrap">使用加密算法以安全可靠的方式并不容易！</span></div></div><h2 id="hiZcJwVpLyEXqjSJpXbAJe" class="wolai-block"><span class="inline-wrap">Why we need SSL/TLS?</span></h2><div id="tPGx8bRwkX7uWi5eFRPUhX" class="wolai-block wolai-text"><div><span class="inline-wrap">为什么我们需要 SSL/TLS？</span></div></div><ul class="wolai-block"><li id="uR1xmV9aCeFsgiemaaU1pb"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">加密协议的实现很困难</span></li><li id="j77CThZTMXg6xX7XJtkTH2"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">在安全可靠的方式下使用加密算法并不容易</span></li><li id="sP7Gns6kSTY5a29f4hNG1a"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">这些算法只是协议中的构建块</span></li><li id="w6KstcZfamE5r29f5mV12V"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">加密协议需要覆盖并抵御所有已知的攻击</span></li><li id="eCgC7soqrZ5kicGgjqVkYt"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">攻击者可以对数据进行篡改</span></li><li id="5CeNvYht1RvxRURXNz2cAA"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">许多加密协议的适用性有限</span></li><li id="fZU8oScG8Ri11daFcVfMH7"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">SSL 使网络连接的安全性更容易管理</span></li></ul><div id="42tdMggtWrKEk6xTLdv2TB" class="wolai-block wolai-text"><div><span class="inline-wrap">SSL/TLS 现在为基于 TCP 的连接提供了最常见的安全服务。它为 TCP 连接添加了透明的保密性、认证和完整性。</span></div></div><h2 id="a9VqTkgF6nctXbar1XkeEx" class="wolai-block"><span class="inline-wrap">Types of cryptographic algorithms: symmetric key encryption</span></h2><div id="rxzoVJTtAvuziXfeowyL1m" class="wolai-block"><figure class="wolai-center" style="width: 100%; flex-direction: column"><img src="media/image.png" style="width: 100%"/></figure></div><div id="ktfRqhNStwKLSUBtZKdQKV" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><div id="5usdQtKi5SVxAUgC7d9NWX" class="wolai-block wolai-text"><div><span class="inline-wrap">对称密钥加密算法是一种加密技术，使用相同的密钥进行加密和解密。这种加密方式非常快速，适用于大量数据的加密和解密，但需要确保密钥的安全性，因为同一个密钥用于加密和解密数据。</span></div></div><h2 id="wWUPoivxyYXNgznVaaTsZZ" class="wolai-block"><span class="inline-wrap">Advantages &amp; Disadvantages of symmetric keys</span></h2><div id="sHd7bfM5492VPtyAGvRaLB" class="wolai-block wolai-text"><div><span class="inline-wrap">• 高效快速：适用于大量数据（流式传输）
• 更简单：包含更少的计算步骤和工作量
• 更适用于嵌入式系统和物联网工业设备：在一些资源受限的环境中</span></div></div><div id="5B9kTt8EYv4tJnir9KP1xv" class="wolai-block wolai-text"><div><span class="inline-wrap">
• 单点故障：只使用一个密钥进行加密和解密，并且必须保密！
• 有限的认证能力：只有持有密钥的人能够解密消息
• 密钥管理：在拥有众多用户的大型环境中，撤销、轮换密钥较为困难••</span></div></div><h2 id="ub8o6ZRSJygdn9K6jWJbdy" class="wolai-block"><span class="inline-wrap">Types of cryptographic algorithms: asymmetric key encryption (Public key encryption)</span></h2><div id="j9hrX5PacH2FT5dJip9rpt" class="wolai-block wolai-text"><div><span class="inline-wrap">非对称密钥加密算法（公钥加密）是一种密码学方法，使用一对密钥来加密和解密数据。这对密钥分为公钥和私钥。公钥可以与任何人共享，而私钥则是保密的。</span></div></div><div id="2auXTeHquR417rKq5FwQfm" class="wolai-block wolai-text"><div><span class="inline-wrap">在非对称密钥加密中，公钥用于加密数据，而私钥用于解密数据。这意味着任何人都可以使用公钥加密数据，但只有持有相应私钥的实体才能解密数据。</span></div></div><div id="bwWaukR7wFYTDd1wD3Pv7d" class="wolai-block wolai-text"><div><span class="inline-wrap">这种加密方法提供了一种安全的通信方式，因为即使公钥被泄露，也无法使用它来破解加密数据。</span></div></div><div id="djjPfwDgEKuCMJ3snWnKfq" class="wolai-block"><figure class="wolai-center" style="width: 494.2857142857143px; flex-direction: column"><img src="media/image_1.png" style="width: 100%"/></figure></div><h2 id="dg3TqVu9uxhn6aqkGynn5e" class="wolai-block"><span class="inline-wrap">Advantages &amp; Disadvantages of Public keys</span></h2><div id="e2YjJ8pdeCAQqfeLoEbRAV" class="wolai-block wolai-text"><div><span class="inline-wrap">分发：仅使用公钥（依赖于对公钥真实性的信任）
• 非否认性：通过证书验证消息的真实性和完整性
• 认证：第三方可以验证与公钥一起发送的证书</span></div></div><div id="kg2RgnddH8dAWmxWKD6YQV" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><div id="vww7aLZsL2VQfwUV5ca2hP" class="wolai-block wolai-text"><div><span class="inline-wrap">缓慢：对于大型消息通常速度较慢且计算密集
• 不适用于大数据：用于密钥交换协议
• 密钥大小：生成的密钥比对称密钥大得多（增加了带宽和存储需求）</span></div></div><h2 id="qs4MARuNejHpJbqaSchjuz" class="wolai-block"><span class="inline-wrap">Types of cryptographic algorithms: Cryptographic hash functions</span></h2><div id="fsUMAEfagMpZd5kXwxcW9U" class="wolai-block wolai-text"><div><span class="inline-wrap">这些是校验算法（例如 MD5 128 位、SHA1 160 位 → 更安全）
• 哈希函数将数据转换为固定大小的校验和（消息摘要）
• 对数据的任何更改都会产生不同的输出（篡改）
• 输出不透露有关数据的信息
• 不可能找到两个输入以产生相同的校验和
• 在算法上基本上不可能重新构造输入（单向）
• 输出大小是对称密钥算法的两倍</span></div></div><h2 id="3xCWyh9JUDAtRVL2sSUU61" class="wolai-block"><span class="inline-wrap">Hash functions demo</span></h2><div id="8fNxfiq3NCsSn2SDucxigc" class="wolai-block"><figure class="wolai-center" style="width: 100%; flex-direction: column"><img src="media/image_2.png" style="width: 100%"/></figure></div><ol class="wolai-block"><li id="h6CT4yXGNQV4CYQ3HS776U"><div class="marker"></div><span class="inline-wrap"><b>哈希化</b></span><span class="inline-wrap">：不直接存储密码，而是存储它们的哈希值。常用的哈希算法有<span class="jill"></span>SHA-256<span class="jill"></span>或<span class="jill"></span>bcrypt<span class="jill"></span>等。当用户登录时，您会对提供的密码进行哈希处理，然后将其与存储的哈希值进行比较。即使有人访问您的数据库，也无法获取实际的密码。</span></li><li id="3CRk3QTUE3cRr4drdUuEqa"><div class="marker"></div><span class="inline-wrap"><b>加盐哈希</b></span><span class="inline-wrap">：在哈希之前为每个密码添加一个随机盐。这意味着即使两个用户有相同的密码，由于盐的唯一性，它们的哈希值也会不同。</span></li><li id="dKo2V7xv48tD1GkEQyjPaz"><div class="marker"></div><span class="inline-wrap"><b>密钥拉伸</b></span><span class="inline-wrap">：该技术涉及多次重复哈希处理。它可以减缓暴力破解攻击，使攻击者更难以破解密码。</span></li><li id="mQBn5braz1bUCSGqdoUYed"><div class="marker"></div><span class="inline-wrap"><b>安全存储</b></span><span class="inline-wrap">：确保您的数据库得到了适当的安全保护。对于静态和传输中的敏感数据使用加密。定期审计系统以检查漏洞，并保持软件和框架的更新。</span></li></ol><h2 id="etYaod4jwBfMse5Fw2oLn4" class="wolai-block"><span class="inline-wrap">Types of cryptographic algorithms: Message Authentication Codes (MACs)</span></h2><div id="cYqc7nuMb2sYZuV9VGs3VR" class="wolai-block"><figure class="wolai-center" style="width: 100%; flex-direction: column"><img src="media/image_3.png" style="width: 100%"/></figure></div><div id="a83n8U6dkXs5vGy8Jae6tS" class="wolai-block wolai-text"><div><span class="inline-wrap">消息认证码（MAC）是一种用于验证消息完整性和认证消息发送者身份的密码学算法。它们通常与对称密钥加密算法一起使用，以提供更高级别的安全性。</span></div></div><div id="qjPMjgts9poA6gAYknKryh" class="wolai-block wolai-text"><div><span class="inline-wrap">MACs 使用密钥和消息作为输入，并生成一个固定长度的哈希值作为输出。接收者使用相同的密钥和消息计算出相同的哈希值，并将其与发送的哈希值进行比较，以验证消息的完整性和发送者的身份。</span></div></div><div id="nKMnU293acu3X7SURpoj4m" class="wolai-block wolai-text"><div><span class="inline-wrap">与哈希函数类似，MACs 也是单向函数，即无法从哈希值反推出原始消息或密钥。常见的 MAC 算法包括 HMAC（基于哈希的消息认证码）和 CMAC（密码消息认证码）。MACs 在保护通信和数据完整性方面起着重要作用，并广泛用于网络通信和数据存储中。</span></div></div><div id="5gcTYAnkir4yrmmsKd6Nmi" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><div id="jdy7MmondYT7LhjiQKBhQG" class="wolai-block wolai-text"><div><span class="inline-wrap">在<span class="jill"></span>SSL<span class="jill"></span>和<span class="jill"></span>OpenSSL<span class="jill"></span>中，MAC<span class="jill"></span>是通过<span class="jill"></span>HMAC（基于哈希的消息认证码）来实现的。MAC<span class="jill"></span>使用一个密钥（通常称为&quot;secret key&quot;）和消息作为输入，然后生成一个固定长度的哈希值作为输出。在<span class="jill"></span>SSL<span class="jill"></span>和<span class="jill"></span>OpenSSL<span class="jill"></span>中，这个哈希值通常被称为&quot;message digest&quot;（消息摘要）。

HMAC<span class="jill"></span>通过在哈希函数的输入中引入密钥来增强其安全性。这样可以防止攻击者通过分析消息摘要来破解密钥。MAC<span class="jill"></span>的主要目的是确保消息的完整性，即保护消息免受未经授权的篡改。在<span class="jill"></span>SSL<span class="jill"></span>和<span class="jill"></span>OpenSSL<span class="jill"></span>中，MAC<span class="jill"></span>被用于验证消息在传输过程中是否被篡改，以确保通信的安全性。</span></div></div><h2 id="6WsvmVVsV3Nm6FRR8eyUvj" class="wolai-block"><span class="inline-wrap">Types of cryptographic algorithms: Digital signatures</span></h2><div id="hLPSZtiwHLaYGHmwdayUmh" class="wolai-block"><figure class="wolai-center" style="width: 381.7142857142857px; flex-direction: column"><img src="media/image_4.png" style="width: 100%"/></figure></div><div id="hP1rKR5izqo3sQuxq5nLdH" class="wolai-block wolai-text"><div><span class="inline-wrap">一种公钥密码学形式
• 用于提供数字身份验证和加密
• 公钥和私钥可互换使用
• 数字签名非常慢
• 使用<span class="jill"></span>1,024<span class="jill"></span>位或更高位来确保安全
• 发件人用私钥签署消息
• 接收者使用发件人的公钥验证发件人签署的消息</span></div></div><h2 id="gYUGxqNPWtZgbqKph4RiH9" class="wolai-block"><span class="inline-wrap">Encryption Algorithms advantages &amp; disadvantages</span></h2><div id="pMFor4HE93tUqygvLF7U6H" class="wolai-block wolai-text"><div><span class="inline-wrap">数据加密标准（DES）
它是最早广泛使用的加密算法之一，但因为密钥长度较小而不再被认为安全
• 三重<span class="jill"></span>DES（3DES）
通过对<span class="jill"></span>DES<span class="jill"></span>算法应用三次（168<span class="jill"></span>位密钥），有效但消耗的时间较长
• 高级加密标准（AES）
安全性强，计算资源和内存使用效率高
灵活性强，支持多种密钥长度，但容易受到侧信道攻击的影响
• RSA（Rivest-Shamir-Adleman）
广泛用于安全密钥交换、数字签名和公钥加密
具有通过数字签名实现不可否认性的内置机制
为了抵抗攻击，使用大型<span class="jill"></span>RSA<span class="jill"></span>密钥需要更多的加密时间
• 椭圆曲线加密（ECC）
一种安全性强、密钥长度较小的算法。
在带宽和计算资源方面效率高（适用于物联网设备）
具有实现复杂性，并且需要谨慎实施。</span></div></div><h2 id="9EKLKPBU7SaBAnU7V2JbTS" class="wolai-block"><span class="inline-wrap">How to select the key length</span></h2><div id="cYJXR18VQTv4ScCJbb6bRr" class="wolai-block wolai-text"><div><span class="inline-wrap">考虑加密算法：
公钥长度较大，与对称算法相比是大数
512<span class="jill"></span>位密钥过于弱，2,048<span class="jill"></span>位可能过于慢
• 安全要求：
对被加密数据的敏感程度和潜在威胁进行评估
• 数据的寿命：
考虑需要数据保持安全的时间长短（是否需要更长的密钥长度？）
• 法规要求：
确保符合法规要求的最小密钥长度（如<span class="jill"></span>ISO 27001）
• 维持平衡：
更长的密钥提供更多安全性，但可能增加计算开销并导致性能较慢。</span></div></div><h1 id="3RBxDra13J13RCDtwt1A15" class="wolai-block"><span class="inline-wrap"> SSL/TLS</span></h1><h2 id="wpdmrLv74Qck62d2R4v8bt" class="wolai-block"><span class="inline-wrap">Overview of SSL/TLS</span></h2><div id="8w4ZSWRhpFJ4pe9CEJCDCs" class="wolai-block"><figure class="wolai-center" style="width: 197.14285714285714px; flex-direction: column"><img src="media/image_5.png" style="width: 100%"/></figure></div><div id="oJrZvboiXw1ivqVjo5C6W8" class="wolai-block wolai-text"><div><span class="inline-wrap">SSL 是一种广泛部署的安全协议（HTTPS）
• 保护 TCP 上的任何协议
• 客户端向服务器发送握手请求，服务器则在响应中发送证书</span></div></div><h2 id="sgcuCpdzZTUjcf2zDGi31x" class="wolai-block"><span class="inline-wrap">SSL/TLS and TCP/IP</span></h2><div id="x74pVcdwm435W7oHihWwMr" class="wolai-block"><figure class="wolai-center" style="width: 531.4285714285714px; flex-direction: column"><img src="media/image_6.png" style="width: 100%"/></figure></div><ul class="wolai-block"><li id="sMuYe46awfYGiBrwMj1FQ7"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><b>SSL (Secure Sockets Layer)</b></span><span class="inline-wrap">：SSL 是一种安全套接字层协议，用于在网络上提供安全连接。它确保在客户端和服务器之间的通信中进行加密，以保护数据的机密性和完整性。SSL 最常用于保护网站上的敏感信息传输，例如在网上购物时输入的信用卡信息。</span></li><li id="vxBvtkRUrKd9EG7VcDjPNR"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><b>TLS (Transport Layer Security)</b></span><span class="inline-wrap">：TLS 是 SSL 的继任者，它提供了类似的安全功能，但更新了一些安全算法和协议版本。TLS 更加安全且更灵活，是目前用于加密互联网通信的主要协议。许多现代浏览器和服务器都支持 TLS，通常被用于保护 HTTPS 网站。</span></li><li id="7SW8pM2FmiLCRn3skf8njP"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><b>TCP (Transmission Control Protocol)</b></span><span class="inline-wrap">：TCP 是传输控制协议，是互联网通信中的一种核心协议。它负责在计算机之间建立可靠的连接，并确保数据的有序传输和可靠交付。TCP 通过将数据分成小块并添加序号来实现数据的可靠性，同时负责处理数据包的传输错误和重发。</span></li><li id="dHohvww9mkB1j6NmWdNsgH"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><b>IP (Internet Protocol)</b></span><span class="inline-wrap">：IP 是互联网协议，它定义了在网络上发送和接收数据包的规则。IP 协议负责确定数据包的目标地址，并通过网络将其传送到目标位置。它是 TCP/IP 协议套件的一部分，与 TCP 一起用于在网络上可靠地传输数据。</span></li></ul><h2 id="8dvpwTwEVJ2Ug78BURia1Q" class="wolai-block"><span class="inline-wrap">SSL/TLS Handshake</span></h2><div id="w9zwLkEbfyZjJfJ2UDcpsq" class="wolai-block"><figure class="wolai-center" style="width: 433.7142857142857px; flex-direction: column"><img src="media/image_7.png" style="width: 100%"/></figure></div><div id="2e5Q2QdRFS2aLhG5EN4NBQ" class="wolai-block wolai-text"><div><span class="inline-wrap">SSL/TLS 握手过程通常涉及两轮握手，也就是两次握手。在第一轮握手中，客户端向服务器发送握手请求，服务器回应并发送其证书以及用于密钥协商的其他信息。在第二轮握手中，服务器确认客户端的请求，并发送确认信息，完成握手过程。</span></div></div><div id="vVpboHJEYyqiA1KoVuqVzd" class="wolai-block wolai-text"><div><span class="inline-wrap">SSL/TLS 握手是建立安全连接的过程，它确保在客户端和服务器之间的通信是加密和安全的。以下是 SSL/TLS 握手的步骤：</span></div></div><ol class="wolai-block"><li id="shd7TVsori3XsuKovZci2j"><div class="marker"></div><span class="inline-wrap"><b>Client Hello</b></span><span class="inline-wrap">：客户端向服务器发送一个 Client Hello 消息，其中包含 SSL/TLS 版本、支持的加密算法列表以及一个随机数。</span></li><li id="h5LjBBUUPHRNpqiyuYQ6M1"><div class="marker"></div><span class="inline-wrap"><b>Server Hello</b></span><span class="inline-wrap">：服务器收到客户端的请求后，选择与客户端相匹配的 SSL/TLS 版本和加密算法，并向客户端发送一个 Server Hello 消息，其中包含服务器选择的 SSL/TLS 版本、加密算法、服务器证书（如果需要）、服务器的随机数以及一个用于生成会话密钥的临时密钥。</span></li><li id="jTrZmXZrme5mndTfGLgcBM"><div class="marker"></div><span class="inline-wrap"><b>Server Certificate</b></span><span class="inline-wrap">：如果服务器需要验证身份，它会将数字证书发送给客户端。数字证书包含服务器的公钥以及相关信息，由证书颁发机构（CA）签名。</span></li><li id="jwVSim3aPciTJe7oC1ZM8G"><div class="marker"></div><span class="inline-wrap"><b>Key Exchange</b></span><span class="inline-wrap">：在确定加密算法后，客户端生成一个随机的会话密钥，并使用服务器的公钥加密该密钥。然后客户端将加密后的会话密钥发送给服务器。</span></li><li id="8dvbJYdFWeiAAfKaXevwCT"><div class="marker"></div><span class="inline-wrap"><b>Finished Messages</b></span><span class="inline-wrap">：客户端和服务器分别发送 Finished 消息，其中包含使用会话密钥计算的摘要，以验证握手过程中的数据完整性。</span></li><li id="5QvyjfphdiiP5uenhMXF8f"><div class="marker"></div><span class="inline-wrap"><b>Session Establishment</b></span><span class="inline-wrap">：一旦服务器验证了客户端的 Finished 消息，并且客户端验证了服务器的 Finished 消息，SSL/TLS 握手就完成了，安全连接建立起来。服务器和客户端之间的后续通信将使用会话密钥进行加密和解密。</span></li></ol><div id="fgJHEmJePVWJrKF9bKj7RW" class="wolai-block wolai-text"><div></div></div><div id="e3nsKY3nqsWi6duWUQcaxS" class="wolai-block wolai-text"><div><span class="inline-wrap">第一次握手是客户端向服务器发送 Client Hello 消息，其中包含 SSL/TLS 版本、支持的加密算法列表以及一个随机数。</span></div></div><div id="bGpyDpJDazu8cfNV4Sa9h8" class="wolai-block wolai-text"><div><span class="inline-wrap">第二次握手是服务器收到客户端的请求后，选择与客户端相匹配的 SSL/TLS 版本和加密算法，并向客户端发送一个 Server Hello 消息，其中包含服务器选择的 SSL/TLS 版本、加密算法、服务器证书（如果需要）、服务器的随机数以及一个用于生成会话密钥的临时密钥。</span></div></div><h2 id="uwb2PNHQdrruLhdBmYxucr" class="wolai-block"><span class="inline-wrap">MitM attack for SSL/TLS</span></h2><div id="8vsZMFediFpJC1Lv5iwpaA" class="wolai-block wolai-text"><div><span class="inline-wrap">攻击者需要证书和私钥的副本才能冒充已知服务器
攻击者可嗅探服务器消息并出示攻击者的证书
伪造的证书看起来可能是合法的
中间人（MitM）攻击，攻击者在所有通信中进行窃听
请注意，这些攻击需要一定的技术知识和技能，并且需要获得适当的授权才能进行。在大多数情况下，网络管理员和安全专家会采取适当的安全措施来防止此类攻击。</span></div></div><div id="bEbY4XqUcdKWP32egpxLug" class="wolai-block"><figure class="wolai-center" style="width: 100%; flex-direction: column"><img src="media/image_8.png" style="width: 100%"/></figure></div><div id="fQnZTJ6pgax1n7CW5XNjCc" class="wolai-block wolai-text"><div><span class="inline-wrap">中间人攻击（Man-in-the-Middle，简称<span class="jill"></span>MitM）是一种网络攻击，其中攻击者插入自己（“中间人”）在通信双方之间，以监视、拦截或篡改通信。对于 SSL/TLS 连接，中间人攻击可能会发生在握手阶段或通信阶段。

在 SSL/TLS 握手阶段，中间人可能会伪装成服务器与客户端建立连接，然后将客户端的请求转发给真正的服务器，并将服务器的响应转发给客户端。在这个过程中，中间人可以解密和查看通信内容，并甚至可以篡改通信数据。为了实现这种攻击，中间人通常会欺骗客户端，使其相信他们正在与正真的服务器通信，同时欺骗服务器，使其认为他们正在与真实的客户端通信。

为了防止中间人攻击，SSL/TLS 使用了公钥基础设施（PKI）和数字证书。服务器使用数字证书证明其身份，并使用公钥加密通信。客户端验证服务器的证书，并使用公钥加密通信。如果证书验证失败或通信被篡改，SSL/TLS 连接将被中断，从而防止中间人攻击。

此外，使用安全的通信渠道（如 VPN）或其他额外的安全层（如双因素认证）也可以帮助防止中间人攻击。</span></div></div><h2 id="2D6jhJYeSQGod3FHbVFhxb" class="wolai-block"><span class="inline-wrap">What SSL/TLS doesn’t do well?</span></h2><div id="s83En2fT1BidU75TEUDLH2" class="wolai-block wolai-text"><div><span class="inline-wrap">使用 SSL 比 HTTP 连接慢（使用公钥进行握手）
• 加密和解密数据的开销
• 不适用于非面向连接的传输层协议，比如 UDP
• SSL 不支持不可否认性（如果对方附加了带有无效签名的消息怎么办？）
• SSL 不能保护应用程序本身的缺陷，例如缓冲区溢出
• SSL 不能保护数据在发送之前，只能保护传输中的数据</span></div></div><h2 id="ffPV191HBeWbciw882Yu56" class="wolai-block"><span class="inline-wrap">Using SSL and the OpenSSL library</span></h2><div id="sirXe4ShBwtzhS8gjbvWzw" class="wolai-block wolai-text"><div><span class="inline-wrap">作为 DES、AES 和 RSA 等
• OpenSSL 曾经是由 Eric A. Young 和 Tim J. Hudson 创建的 SSLeay
• 自 1995 年开始
• OpenSSL 的第一个版本是在 1998 年发布的 0.9.1c 版本
• OpenSSL 是一个加密库和 SSL 工具包
• SSL 库提供了所有版本的 SSL 以及 TLS
• 支持最流行的对称加密、公钥加密和哈希算法
• OpenSSL 是一个免费的 SSL 实现，可在 Unix 操作系统和 Windows 上运行
• 它具有伪随机数生成器的功能（增加熵）</span></div></div><h2 id="kWa1KFLDd4codFB2pfbEpz" class="wolai-block"><span class="inline-wrap">OpenSSL Files</span></h2><div id="8C1L8Nqg9UV534LyGc9QjJ" class="wolai-block wolai-text"><div><span class="inline-wrap">.KEY
私钥文件
• .CSR (证书签名请求)
带有信息并需要私钥发送给证书颁发机构的文件
• .CRT (证书简称)
安全证书文件，用于建立安全连接
• .PEM (隐私增强邮件)
可能包括公钥证书或整个证书链（公钥、私钥、证书）
• .CRL (证书吊销列表)
用于在到期之前取消证书授权的文件</span></div></div><div id="wuoNi2ekMmex5KgYNcY2YH" class="wolai-block"><figure class="wolai-center" style="width: 560px; flex-direction: column"><img src="media/image_9.png" style="width: 100%"/></figure></div><h2 id="hbxZQy4uvNao8euNkXjwxW" class="wolai-block"><span class="inline-wrap">Some Known attack against SSL/ TLS (CVEs?)</span></h2><div id="98bqNPCNN4QMCSsYzfdpsw" class="wolai-block wolai-text"><div><span class="inline-wrap">一些已知的针对 SSL/TLS 的攻击（CVEs？）
• 降级攻击
攻击者试图使系统使用较旧的不安全版本协议、已知存在漏洞的加密算法
• CRIME 攻击（压缩比例信息泄漏易攻击）
攻击者利用 HTTPS 连接中数据压缩的漏洞，观察压缩的 HTTPS 响应的大小
• BREACH 攻击（通过自适应压缩的超文本的浏览器侦查和泄露）
攻击者利用漏洞查看加密流量，并迫使受害者向易受攻击的服务器发送 HTTP 请求</span></div></div><h2 id="wZnQFxEe4934vmptDFxe9k" class="wolai-block"><span class="inline-wrap">OpenSSL basics: Demo with SSL/TLS on Apache web server</span></h2><h2 id="sJuZhrEDQuHdgcsjTou12a" class="wolai-block"><span class="inline-wrap">TCP sequence prediction attack</span></h2><div id="wbVEj9AawJogfXsdCRK6nt" class="wolai-block"><figure class="wolai-center" style="width: 100%; flex-direction: column"><img src="media/image_10.png" style="width: 100%"/></figure></div><div id="kxDBZgyFPTNtZfemcsU3K1" class="wolai-block"><figure class="wolai-center" style="width: 500.57142857142856px; flex-direction: column"><img src="media/image_11.png" style="width: 100%"/></figure></div><div id="vkD1R4xZt8zaXg92bAzGwr" class="wolai-block"><figure class="wolai-center" style="width: 384.57142857142856px; flex-direction: column"><img src="media/image_12.png" style="width: 100%"/></figure></div><h2 id="e9TvdfgZo7Rvx3tsUuzk7o" class="wolai-block"><span class="inline-wrap">Public Key Infrastructure (PKI)</span></h2><div id="s4BwrMije2BQ2qAKDKG2Nc" class="wolai-block wolai-text"><div><span class="inline-wrap">PKI 提供了建立信任的手段，将公钥和身份与证书绑定在一起
• 通过 PKI，我们确信数据是用相应的私钥解密的
• 如果我们将这与哈希结合起来创建一个签名，我们就可以确保加密的数据没有被篡改
• 证书可以使用发行者的私钥签名，其中包含了验证身份的所有信息</span></div></div><h2 id="gjXbaLy7cYD885jDpW9HkG" class="wolai-block"><span class="inline-wrap">Certification Authorities</span></h2><div id="7eQ7fc8tihNRwt2JPVH4ck" class="wolai-block wolai-text"><div><span class="inline-wrap">一个私有 CA 可以本地发行证书，例如，为一个组织发行证书，该组织由其成员信任
• 公共 CA 发布公共证书，供成员使用，并且必须被公众信任（第三方 CA 证书）
• CA 必须值得信任，以扩展信任，证书包含的公钥是自由分发的</span></div></div><h2 id="v43XCazi3CMFf4cVHV3X1Q" class="wolai-block"><span class="inline-wrap">Let’s Encrypt key principles</span></h2><div id="igMz7XSNre7csVb14EhTrz" class="wolai-block wolai-text"><div><span class="inline-wrap">一个公共 CA 可以自动为 HTTPS 服务器颁发一个受浏览器信任的证书，而且是免费的
• 先决条件是拥有有效的注册域名并在 Web 服务器上安装证书管理代理（Certbot）
• 由互联网安全研究组织（ISRG）提供的免费开放证书颁发机构（CA）
• 为管理员提供 TLS 安全最佳实践，以保护其网站
• 提供透明度，颁发的证书将公开供任何人检查</span></div></div><h2 id="8jVC5etcCP5bK8RyysDuQX" class="wolai-block"><span class="inline-wrap">Let’s Encrypt CA Basics</span></h2><div id="mw42gjQ9jVayQvgqr8BnPW" class="wolai-block wolai-text"><div><span class="inline-wrap">1.Let&#39;s Encrypt 使用公钥来识别服务器管理员。安装的代理生成一个新的密钥对，并告知 Let&#39;s Encrypt 服务器控制了一个域名。</span></div></div><div id="oAKRn3nNBuss24RmyvXpme" class="wolai-block wolai-text"><div><span class="inline-wrap">2.Let&#39;s Encrypt CA 将发出一系列的挑战，例如：</span></div></div><ul class="wolai-block"><li id="n4d5UZJnBDpw4AgYc2dmVn"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">提供 DNS 记录</span></li><li id="pcHLHYzM2G8QiuSGfEgZbP"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">提供 HTTP 资源</span></li><li id="4n6MApJWb6eHhRBLohLDjY"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">使用私钥签署任意数字（nonce）</span></li></ul><div id="8SAG13kVk1bMygmtKYqfHE" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><div id="d2c3mzPhgiPGa6RpGpoxkZ" class="wolai-block"><figure class="wolai-center" style="width: 100%; flex-direction: column"><img src="media/image_13.png" style="width: 100%"/></figure></div><h2 id="tLP7B7XToabANyWU5K3w8R" class="wolai-block"><span class="inline-wrap">Let’s Encrypt CA</span></h2><ol class="wolai-block"><li id="nBgkXjZXCfMxZJtLcopbZt"><div class="marker"></div><span class="inline-wrap">代理完成任务，CA 验证了 nonce 和任务的签名，授予代理请求、续订和撤销证书的能力。</span></li></ol><div id="jifQhbmr1iwtsU4XMdVEQu" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><div id="c1dKEAGwGaWs5zByoj1sw3" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><div id="vmmo8z5Xz3RZNAfshJUr1T" class="wolai-block"><figure class="wolai-center" style="width: 452px; flex-direction: column"><img src="media/image_14.png" style="width: 100%"/></figure></div><div id="2BbZ8DhqwSZEfnpsoH6KJL" class="wolai-block wolai-text"><div><span class="inline-wrap">5.代理使用签名（公钥）构建证书签发请求，并请求 Let&#39;s Encrypt 使用其公钥为该域发行证书（整个 CSR 再次使用私钥签名）。</span></div></div><div id="aYGMEf2SPXDkRMvqWCBp64" class="wolai-block"><figure class="wolai-center" style="width: 505.7142857142857px; flex-direction: column"><img src="media/image_15.png" style="width: 100%"/></figure></div><div id="xzoTm7NGyJPJ5FZWSzjMvM" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><div id="eauEQ7u9Q59RnGRRDjGstU" class="wolai-block wolai-text"><div><span class="inline-wrap">6 Let&#39;s Encrypt CA 收到请求后，验证两个签名，然后为该域发行证书并将其发送到服务器。</span></div></div><div id="3MTGm129RjtwiKTbrYGSDn" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><div id="nj1XkDD4ei3trbhMDLcXgb" class="wolai-block"><figure class="wolai-center" style="width: 432.57142857142856px; flex-direction: column"><img src="media/image_16.png" style="width: 100%"/></figure></div><div id="5CYGUXDAQRxRqCdqY3xhxu" class="wolai-block wolai-text"><div><span class="inline-wrap">撤销工作方式类似，代理签署撤销请求，然后 Let&#39;s Encrypt CA 验证请求并授权，浏览器随后停止接受无效证书。</span></div></div><div id="iHWXXHFxYGX5ewsMcUvLQo" class="wolai-block"><figure class="wolai-center" style="width: 514.8571428571429px; flex-direction: column"><img src="media/image_17.png" style="width: 100%"/></figure></div><h2 id="wpnsWCFkohzyDPmZ86mLQ4" class="wolai-block"><span class="inline-wrap">Introduction to PGP - Overview</span></h2><div id="wPhCKtp3zbRDgWsfyRerDu" class="wolai-block wolai-text"><div><span class="inline-wrap">PGP 由 Phil Zimmermann 在 1991 年发布，成为了安全交换信息的事实标准。
如今，PGP 已成为一个名为 OpenPGP 的开放标准。
PGP 可以在线加密消息，包括电子邮件、纯文本文件等。
它接近于军用级别的对称和非对称加密。
PGP 依赖于私钥（保存安全）、完整性检查、消息认证和签名证书。
由于 PGP 速度较慢，因此不适合在应用程序中使用。</span></div></div><div id="bTQPNBh74ynxSyktujtWAF" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><h1 id="iDttCVLi1NzeR1eNW7dcsW" class="wolai-block"><span class="inline-wrap">7.1 </span><span class="inline-wrap"><a href="https://cs-uob.github.io/COMSM0085/exercises/part2/encryption/openssl.html#introduction-to-openssl-a-hands-on-lab-using-openssl-and-encryption"><span>OpenSSL 简介：使用 OpenSSL 和加密的实践实验室</span></a></span></h1><div id="fccV4RAENQCLRkacw3TcSE" class="wolai-block wolai-text"><div><span class="inline-wrap"></span><br/></div></div><h3 id="pUkUvM5jgmvEHGKsr3jD9M" class="wolai-block"><span class="inline-wrap">首先我们安装<span class="jill"></span>OpenSSL<span class="jill"></span>工具</span></h3><div id="cg43BoLGAyrcucZ4krhipp" class="wolai-block wolai-text"><div><span class="inline-wrap"><code>openssl</code></span><span class="inline-wrap">使用您的 VM<span class="jill"></span>通过适当的命令进行安装。在 Debian 上是：</span></div></div><code-block id="w87cr99vZYyWhrPDUJGHu5" class="wolai-block"><div class="wolai-pre"><div data-lang="CSS" class="marker"></div><pre>$ sudo apt install openssl </pre></div></code-block><div id="ipcDrUpUWhGcSoq3bSZwNP" class="wolai-block wolai-text"><div><span class="inline-wrap">或者，您可以在获取并提取源代码<span class="jill"></span>https://www.openssl.org/source/后进行构建：</span></div></div><code-block id="u4wtVjVi74STXKi1nbW4od" class="wolai-block"><div class="wolai-pre"><div data-lang="CSS" class="marker"></div><pre>$ ./config
$ make
$ make test # This step is optional.
$ sudo make install
</pre></div></code-block><div id="8vuj6va7AcdYRS5dKXehGT" class="wolai-block wolai-text"><div><span class="inline-wrap">请记住，您可以将这</span><span class="inline-wrap"><code>apt install</code></span><span class="inline-wrap">一行添加到 Vagrantfile 中以在 Vagrant 上使用 OpenSSL。</span></div></div><h3 id="2SJRkmhjdCSvvT2Jb4jDkd" class="wolai-block"><span class="inline-wrap">1. </span><span class="inline-wrap"><a href="https://cs-uob.github.io/COMSM0085/exercises/part2/encryption/openssl.html#use-openssl-to-encrypt-files-with-symmetric-encryption"><span>使用<span class="jill"></span>OpenSSL<span class="jill"></span>通过对称加密对文件进行加密</span></a></span></h3><div id="7QhorNaViAyxD6cSPtgoj" class="wolai-block wolai-text"><div><span class="inline-wrap">创建一个名为 的文本文件</span><span class="inline-wrap"><code>mytext.txt</code></span><span class="inline-wrap">，并在其中写入您要发送的消息。然后，使用 OpenSSL 使用对称 AES 256 密钥加密该文件：</span></div></div><code-block id="stPaoM3JU7EgBnUoFMebwb" class="wolai-block"><div class="wolai-pre"><div data-lang="CSS" class="marker"></div><pre> openssl aes256 -in mytext.txt -out mytext.enc
</pre></div></code-block><div id="2gurkoazzjqyeVDeiC1Xs2" class="wolai-block wolai-text"><div><span class="inline-wrap">系统会要求您输入密码来创建密钥。输出将被命名为</span><span class="inline-wrap"><code>mytext.enc</code></span><span class="inline-wrap">.请务必不要忘记您的密码。</span></div></div><h4 id="eZcstWszyvKmgkh9ENTGc5" class="wolai-block"><span class="inline-wrap"><a href="https://cs-uob.github.io/COMSM0085/exercises/part2/encryption/openssl.html#what-is-the-difference-between-your-unencrypted-file-and-the-encrypted-one-try-and-read-an-ecrypted-file"><span>未加密的文件和加密的文件有什么区别？尝试读取加密文件。</span></a></span></h4><div id="qRozuT8Y9LGqBeQnVrRggB" class="wolai-block wolai-text"><div><span class="inline-wrap">或者，您可以使用</span><span class="inline-wrap"><code>base64</code></span><span class="inline-wrap">.此选项创建一个包含 ASCII 字符而不是纯二进制流的文件，使其适合通过电子邮件发送。为此，请再次指定 base64 而不是 AES 256 进行加密，并传递标志</span><span class="inline-wrap"><code>-a</code></span><span class="inline-wrap">。</span></div></div><div id="4kjSLR2q5iHYVkVS58aVzS" class="wolai-block wolai-text"><div><span class="inline-wrap">文件大小是否比以前大？如果是这样，为什么？现在，您可以将加密的敏感信息发送给收件人。</span></div></div><h4 id="fSJYjZ9HV3Do9RibtdKiGd" class="wolai-block"><span class="inline-wrap"><a href="https://cs-uob.github.io/COMSM0085/exercises/part2/encryption/openssl.html#how-to-decrypt-using-openssl"><span>如何使用 OpenSSL 解密</span></a></span></h4><div id="rhfgjxSnQrokEG9kRo4RSw" class="wolai-block wolai-text"><div><span class="inline-wrap">使用电子邮件或其他方法与某人交换加密文件。使用该</span><span class="inline-wrap"><code>-d</code></span><span class="inline-wrap">参数来解密文件，无论它是二进制流还是仅包含 ASCII 字符。您需要使用与加密文件相同的密码。</span></div></div><h2 id="eyGj9mkJay43caMLy2JbfF" class="wolai-block"><span class="inline-wrap">2.</span><span class="inline-wrap"><a href="https://cs-uob.github.io/COMSM0085/exercises/part2/encryption/openssl.html#use-openssl-to-encrypt-files-with-asymmetric-encryption"><span>使用<span class="jill"></span>OpenSSL<span class="jill"></span>对文件进行非对称加密</span></a></span></h2><div id="6peop4V7JYBZzEAZwNNL99" class="wolai-block wolai-text"><div><span class="inline-wrap">非对称加密使用两组密钥，称为密钥对。可以与您想要通信的实体自由分发的公钥，以及从不共享的私钥。</span></div></div><div id="7zmf195Yp9coeVCz9V7ccA" class="wolai-block wolai-text"><div><span class="inline-wrap">2.1</span><span class="inline-wrap"><a href="https://cs-uob.github.io/COMSM0085/exercises/part2/encryption/openssl.html#generate-key-pairs"><span>生成密钥对</span></a></span></div></div><div id="rJEjDW85kehkyJf53NAuFz" class="wolai-block wolai-text"><div><span class="inline-wrap">要使用 OpenSSL 生成 1024 位的公钥-私钥对，您可以使用以下命令：</span></div></div><code-block id="5eFRig9g3wbD5WmRDRe9XL" class="wolai-block"><div class="wolai-pre"><div data-lang="Bash" class="marker"></div><pre>openssl genrsa <span class="token parameter variable">-out</span> private_key.pem <span class="token number">1024</span></pre></div></code-block><div id="8WrVtLLPGTVDphodFKcE2j" class="wolai-block wolai-text"><div><span class="inline-wrap">这会生成一个 1024 位的 RSA 私钥，并将其保存在名为 </span><span class="inline-wrap"><code>private_key.pem</code></span><span class="inline-wrap"> 的文件中。</span></div></div><div id="2cV8S1i1W9wPfgJMajV5Hg" class="wolai-block wolai-text"><div><span class="inline-wrap">如果您还想要从私钥中提取公钥，可以使用以下命令：</span></div></div><code-block id="gvpCc5Urpi6HdjwQi1Ekdv" class="wolai-block"><div class="wolai-pre"><div data-lang="Bash" class="marker"></div><pre>openssl rsa <span class="token parameter variable">-pubout</span> <span class="token parameter variable">-in</span> private_key.pem <span class="token parameter variable">-out</span> public_key.pem</pre></div></code-block><div id="pgQnDqmxciiePSa3G6nKoQ" class="wolai-block wolai-text"><div><span class="inline-wrap">这会从私钥文件中提取公钥，并将其保存在名为 </span><span class="inline-wrap"><code>public_key.pem</code></span><span class="inline-wrap"> 的文件中。</span></div></div><div id="it9yWgnmSgQzoA7iqf4hQA" class="wolai-block wolai-text"><div><span class="inline-wrap">请注意，生成的私钥文件包含了敏感信息，请妥善保管，并且不要将其泄露给未授权的人员。</span></div></div><div id="rozTAEdZZj78uBVSvsnSJW" class="wolai-block wolai-text"><div><span class="inline-wrap">2.2 </span><span class="inline-wrap"><a href="https://cs-uob.github.io/COMSM0085/exercises/part2/encryption/openssl.html#distribute-the-public-key"><span>分发公钥</span></a></span></div></div><div id="qfKhY4KdHjn21U9AqHgzhJ" class="wolai-block wolai-text"><div><span class="inline-wrap">要使用 OpenSSL 工具从密钥对中提取公钥并保存为 PEM 格式的文件，您可以执行以下命令：</span></div></div><code-block id="kWDny7CRrrv9X4vL1DsbAW" class="wolai-block"><div class="wolai-pre"><div data-lang="Bash" class="marker"></div><pre>openssl rsa <span class="token parameter variable">-pubout</span> <span class="token parameter variable">-in</span> private_key.pem <span class="token parameter variable">-out</span> public_key.pem</pre></div></code-block><div id="gNY12qPBbubWEm9w43FVQE" class="wolai-block wolai-text"><div><span class="inline-wrap">其中：</span></div></div><ul class="wolai-block"><li id="Ud1i6PKTMAYuG5dtRVSN3"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>-pubout</code></span><span class="inline-wrap"> 参数表示要输出公钥。</span></li><li id="4Bew6HFyhpJewuXULKMsnk"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>-in private_key.pem</code></span><span class="inline-wrap"> 指定了包含私钥的 PEM 格式文件的路径。</span></li><li id="jDqH9HdZp76S2Jxoqtc6ug"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>-out public_key.pem</code></span><span class="inline-wrap"> 指定了要保存公钥的文件路径。</span></li></ul><div id="ix6VSBi1JvZNAuRFMZdooQ" class="wolai-block wolai-text"><div><span class="inline-wrap">这将从私钥文件中提取公钥并将其保存为公钥文件（</span><span class="inline-wrap"><code>public_key.pem</code></span><span class="inline-wrap">）。</span></div></div><div id="5dDKjqEXoMiXqNxZ5QNvgH" class="wolai-block wolai-text"><div><span class="inline-wrap">2.3</span><span class="inline-wrap"><a href="https://cs-uob.github.io/COMSM0085/exercises/part2/encryption/openssl.html#exchange-your-public-keys"><span>交换您的公钥</span></a></span></div></div><div id="fdUhPf8q1xjmj5W2uhjkYk" class="wolai-block wolai-text"><div><span class="inline-wrap">要使用 OpenSSL 命令创建加密消息，您可以执行以下步骤：</span></div></div><ol class="wolai-block"><li id="asY2siwuUxoH2iURfkZ2ws"><div class="marker"></div><span class="inline-wrap">首先，将要加密的消息保存到一个文件中。</span></li><li id="Lw75ZdgLkh11Zc4nGBNsm"><div class="marker"></div><span class="inline-wrap">使用 OpenSSL 命令来加密消息，并将其输出到另一个文件中。在加密消息时，您需要使用接收者的公钥进行加密。</span></li></ol><div id="mW1Mgwt7ciUYUCpRmnbB42" class="wolai-block wolai-text"><div><span class="inline-wrap">下面是一个示例命令，假设您要加密的消息保存在名为 </span><span class="inline-wrap"><code>message.txt</code></span><span class="inline-wrap"> 的文件中，接收者的公钥保存在名为 </span><span class="inline-wrap"><code>receiver_public_key.pem</code></span><span class="inline-wrap"> 的文件中，并且您希望将加密后的消息保存在名为 </span><span class="inline-wrap"><code>encrypted_message.enc</code></span><span class="inline-wrap"> 的文件中：</span></div></div><code-block id="quJpmRS737Bk7Zhx1H1anG" class="wolai-block"><div class="wolai-pre"><div data-lang="Bash" class="marker"></div><pre>openssl rsautl <span class="token parameter variable">-encrypt</span> <span class="token parameter variable">-inkey</span> receiver_public_key.pem <span class="token parameter variable">-pubin</span> <span class="token parameter variable">-in</span> message.txt <span class="token parameter variable">-out</span> encrypted_message.enc</pre></div></code-block><div id="czGXBpprh9Yqb9AMVeLt7y" class="wolai-block wolai-text"><div><span class="inline-wrap">其中：</span></div></div><ul class="wolai-block"><li id="u2aAf33h9PE4PGv5CLppPx"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>rsautl</code></span><span class="inline-wrap"> 是 OpenSSL 中用于 RSA 加密、解密、签名和验证的工具。</span></li><li id="biz738EmtomAtBybcAQUj4"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>-encrypt</code></span><span class="inline-wrap"> 参数表示要进行加密操作。</span></li><li id="2r8odm6iu8a7EJ8rNZWYDE"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>-inkey receiver_public_key.pem</code></span><span class="inline-wrap"> 指定了接收者的公钥文件的路径。</span></li><li id="uYPyLgNhJJSz35Ntk9yhhS"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>-pubin</code></span><span class="inline-wrap"> 参数表示指定的密钥文件是一个公钥。</span></li><li id="ptzGoVEtd16LZuWvtwob3z"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>-in message.txt</code></span><span class="inline-wrap"> 指定了包含要加密的消息的文件路径。</span></li><li id="4d53Dc5egHq4vC865t9LN9"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>-out encrypted_message.enc</code></span><span class="inline-wrap"> 指定了要保存加密后消息的文件路径。</span></li></ul><div id="2hE5MzYJcNR9ayXgxNVWAD" class="wolai-block wolai-text"><div><span class="inline-wrap">执行此命令后，将使用接收者的公钥加密 </span><span class="inline-wrap"><code>message.txt</code></span><span class="inline-wrap"> 文件中的内容，并将结果保存到 </span><span class="inline-wrap"><code>encrypted_message.enc</code></span><span class="inline-wrap"> 文件中。</span></div></div><div id="xdhvtDsMuvHy7fGa9h8hFt" class="wolai-block wolai-text"><div><span class="inline-wrap">2.4</span><span class="inline-wrap"><a href="https://cs-uob.github.io/COMSM0085/exercises/part2/encryption/openssl.html#try-and-view-the-file-what-is-the-format"><span>尝试查看该文件，格式是什么？</span></a></span></div></div><div id="7qRPKBjVWssQTk1ThTjNyu" class="wolai-block wolai-text"><div><span class="inline-wrap">如果您使用<span class="jill"></span>OpenSSL<span class="jill"></span>来加密和解密文件，您可以使用</span><span class="inline-wrap"><code>openssl rsautl -decrypt</code></span><span class="inline-wrap">命令来解密文件。</span></div></div><h3 id="jwMie1u5BTCirgdJMEURAY" class="wolai-block"><span class="inline-wrap">为什么我们需要 HTTPS？</span></h3><div id="mf43ayYu7vqz58qf7iSteu" class="wolai-block wolai-text"><div><span class="inline-wrap">使用 HTTPS 的网站可以向客户保证其连接是安全的。 HTTPS（即安全超文本传输​​协议）是 HTTP 的受保护版本，HTTP 是用于在浏览器和您正在访问的网站之间传输数据的协议。优先保护用户的隐私和数据安全对于向使用我们在线开发的网络服务的人们灌输信任至关重要</span></div></div><h3 id="7Fkyx7oFKssDsp9NuG7Dxe" class="wolai-block"><span class="inline-wrap"><a href="https://cs-uob.github.io/COMSM0085/exercises/part2/encryption/openssl.html#why-will-we-use-https-locally"><span>为什么我们要在本地使用 HTTPS？</span></a></span></h3><div id="cqcRBzM4hy7qTv9DxpmtXu" class="wolai-block wolai-text"><div><span class="inline-wrap">我们需要创建一个与生产非常相似的开发环境。这种做法有助于避免将来在线部署 Web 应用程序或网站时出现问题。</span></div></div><h1 id="p27AD81z4R2FxfJ5VRTtMA" class="wolai-block"><span class="inline-wrap">3.</span><span class="inline-wrap"><a href="https://cs-uob.github.io/COMSM0085/exercises/part2/encryption/openssl.html#configure-and-utilize-nginx-with-https-for-creating-a-localhost-web-app-and-sign-a-certificate-request-with-openssl"><span>配置并使用带有 HTTPS 的 Nginx 创建本地主机 Web 应用程序，并使用 OpenSSL 签署证书请求。</span></a></span></h1><div id="3r9GntjJUCBprbPwc1SLwn" class="wolai-block wolai-text"><div><span class="inline-wrap">证书签名请求 （CSR） 由三个实体组成：公钥、触发请求的系统和请求的签名。私钥将用于加密证书。为此，我们将使用 OpenSSL。</span></div></div><div id="6Kpti2kDyWgB72GeuST9x9" class="wolai-block wolai-text"><div><span class="inline-wrap">要使用 OpenSSL 创建私钥，我们首先创建一个目录并在其中生成密钥：</span></div></div><code-block id="dTm7m97hTGJxe4NRPyJ7rM" class="wolai-block"><div class="wolai-pre"><div data-lang="CSS" class="marker"></div><pre>$ mkdir ~/store-csr</pre></div></code-block><div id="27ghFgrwDagkDFhMJfEBvh" class="wolai-block wolai-text"><div><span class="inline-wrap">然后，我们生成 RSA 私钥（记下密码）。将 OpenSSL 与命令一起使用，并将 用于大小为 2048 的私钥。接下来，使用数字签名和哈希函数的命令和参数通过 OpenSSL 生成根证书。最后，使其有效期为 30 天。</span><span class="inline-wrap"><code>genrsa``-aes256 parameter``req``-x509``-sha256</code></span></div></div><div id="rJ5qFPMM5ZDpL1oNsyEkKR" class="wolai-block wolai-text"><div><span class="inline-wrap">然后，我们将对稍后使用的服务器发出请求，并且我们想要进行身份验证，例如：</span></div></div><code-block id="t9Cj4vjDzMvoQAZJCFy8b8" class="wolai-block"><div class="wolai-pre"><div data-lang="CSS" class="marker"></div><pre>$ openssl genrsa -out cert.key <span class="token number">2048</span></pre></div></code-block><div id="6faumndUGVBeH1dnWvtzz6" class="wolai-block wolai-text"><div><span class="inline-wrap">从输出中可以看出，我们生成了一个 2048 位的 RSA 私钥。该命令用于生成 RSA 私钥文件，默认值为 512 位。您可以指定不同的密钥大小。使用 调查命令选项。</span><span class="inline-wrap"><code>genrsa``-help</code></span></div></div><div id="pxCH37qgKUSBZTHJWTYR8d" class="wolai-block wolai-text"><div><span class="inline-wrap">现在，使用私钥，我们将使用 OpenSSL 工具创建 CSR。以与上述类似的方式填写字段，不要将任何值留空。我们使用私钥创建证书签名请求，如下所示：</span></div></div><code-block id="2bn45EAQSy5iqymVe69Qhz" class="wolai-block"><div class="wolai-pre"><div data-lang="CSS" class="marker"></div><pre>$ openssl req -new -key cert.key -out cert.csr</pre></div></code-block><h3 id="5H3pwgCfrbzVonfhaJQAWY" class="wolai-block"><span class="inline-wrap">创建配置文件</span></h3><div id="ryJvPFom9oesehu8JLnMSy" class="wolai-block wolai-text"><div><span class="inline-wrap">我们使用您选择的任何文本编辑器创建在当前文件夹中命名的配置文件：</span><span class="inline-wrap"><code>openssl.cnf</code></span></div></div><code-block id="xof9dtChjQ4S1NW8jbjszv" class="wolai-block"><div class="wolai-pre"><div data-lang="CSS" class="marker"></div><pre>[#]Extensions to add to a certificate request

basicConstraints       = <span class="token property">CA</span><span class="token punctuation">:</span>FALSE

authorityKeyIdentifier = <span class="token property">keyid</span><span class="token punctuation">:</span>always<span class="token punctuation">,</span> <span class="token property">issuer</span><span class="token punctuation">:</span>always

keyUsage               = nonRepudiation<span class="token punctuation">,</span> digitalSignature<span class="token punctuation">,</span> keyEncipherment<span class="token punctuation">,</span> dataEncipherment

subjectAltName         = @alt_names

[ alt_names ]

DNS.1 = your hostname
</pre></div></code-block><div id="jV57iKwTWLdYRfgf5NvZ4c" class="wolai-block wolai-text"><div><span class="inline-wrap">对证书请求进行签名并输入密码。验证证书的正确性，如下所示：</span></div></div><code-block id="8yTfdoPG2pnwbaMUGNh3JR" class="wolai-block"><div class="wolai-pre"><div data-lang="CSS" class="marker"></div><pre>$ ~/store-csr$ openssl verify -CAfile rootCert.pem -verify_hostname your hostname cert.crt
</pre></div></code-block><div id="tBw9sGF4pomYNDqzRTnudX" class="wolai-block wolai-text"><div><span class="inline-wrap">将证书添加到浏览器以避免收到有关不受信任证书的警告。对于 Mozilla 浏览器，请按照下列步骤操作：</span></div></div><ul class="wolai-block"><li id="t9VMd58KcqZeAEKgHqu4mY"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">转到首选项 -&gt; 隐私 -&gt;查看证书。</span></li><li id="bErH2cDpNweZcYQwnJvXqG"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">导入 rootCert.pem 文件。</span></li><li id="whpfhwg7Pe7RVhGWeVh8mT"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">单击“下一步”，然后选择“信任此 CA 以识别网站”。</span></li><li id="oyv11Bdo2eTFV4vrNjF7p9"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">这些步骤将确保浏览器信任根证书来识别网站。</span></li></ul><div id="jMM91SHDZ2mQN5t1Keyg6B" class="wolai-block wolai-text"><div><span class="inline-wrap"><i>提示：如果要命名或重命名计算机，请使用：</i></span><span class="inline-wrap"><i><code>sudo hostnamectl set-hostname [new-hostname]</code></i></span><span class="inline-wrap"><i> 并使用 </i></span><span class="inline-wrap"><i><code>hostnamectl</code></i></span><span class="inline-wrap"><i> 进行检查</i></span></div></div><div id="dQ56zG2mz2adk7TKqNUHBs" class="wolai-block wolai-text"><div><span class="inline-wrap">将证书和密钥移动到文件夹中：</span></div></div><code-block id="qLKsgifnbvD5faPR9SRVsg" class="wolai-block"><div class="wolai-pre"><div data-lang="CSS" class="marker"></div><pre>$ ~/store-csr$ sudo cp cert.crt /etc/ssl/certs/
$ sudo cp cert.key /etc/ssl/private/</pre></div></code-block><h3 id="35cejAX1AVEXPH1vVUgdzD" class="wolai-block"><span class="inline-wrap"><a href="https://cs-uob.github.io/COMSM0085/exercises/part2/encryption/openssl.html#nginx-configuration"><span>Nginx 配置</span></a></span></h3><div id="t6AgatHZbMMRyGnSDY6K5w" class="wolai-block wolai-text"><div><span class="inline-wrap">安装 Nginx：</span></div></div><code-block id="iaE8oEC3QYNh2fBGh91WGB" class="wolai-block"><div class="wolai-pre"><div data-lang="CSS" class="marker"></div><pre>$ sudo apt install nginx</pre></div></code-block><div id="q1guC8wG8yhoyJoMM2eNsY" class="wolai-block wolai-text"><div><span class="inline-wrap">在 中创建一个配置文件。例如，创建一个文件：</span><span class="inline-wrap"><code>/etc/nginx/sites-available``yourhostname.conf</code></span></div></div><code-block id="jkBYCXjrd93XHNiL3TQQQQ" class="wolai-block"><div class="wolai-pre"><div data-lang="CSS" class="marker"></div><pre>/etc/nginx/sites-available$ sudo nano myhostname.conf</pre></div></code-block><code-block id="5VZdpSDrZNBjREt5nqNgyL" class="wolai-block"><div class="wolai-pre"><div data-lang="CSS" class="marker"></div><pre><span class="token selector">server</span> <span class="token punctuation">{</span>
    client_max_body_size <span class="token number">100</span>M<span class="token punctuation">;</span>
    server_name yourhostname<span class="token punctuation">;</span>
    listen <span class="token number">443</span> ssl<span class="token punctuation">;</span>
    ssl_certificate /etc/ssl/certs/cert.crt<span class="token punctuation">;</span>
    ssl_certificate_key /etc/ssl/private/cert.key<span class="token punctuation">;</span>

    <span class="token selector">location /</span> <span class="token punctuation">{</span>
        proxy_pass <span class="token property">http</span><span class="token punctuation">:</span>//<span class="token property">yourhostname</span><span class="token punctuation">:</span><span class="token number">8000</span><span class="token punctuation">;</span>
        proxy_set_header Host $host<span class="token punctuation">;</span>
        proxy_set_header X-Forwarded-Proto https<span class="token punctuation">;</span>
        proxy_read_timeout <span class="token number">60</span><span class="token punctuation">;</span>
        proxy_connect_timeout <span class="token number">60</span><span class="token punctuation">;</span>
        proxy_set_header X-Real-IP $remote_addr<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre></div></code-block><div id="bvu4R46J5Jh6HdCe7Xg4Zm" class="wolai-block wolai-text"><div><span class="inline-wrap">编辑您的文件并使用 添加行。</span><span class="inline-wrap"><code>bash /etc/hosts</code></span><span class="inline-wrap"> </span><span class="inline-wrap"><code>bash 127.0.0.1 “yourhostname”</code></span><span class="inline-wrap"> </span><span class="inline-wrap"><code>sudo</code></span></div></div><div id="9piddghZgQ6rMEJw7zHTbA" class="wolai-block wolai-text"><div><span class="inline-wrap">重新启动服务器：</span></div></div><code-block id="ai5ztCuhErqcVjxeoxwtUx" class="wolai-block"><div class="wolai-pre"><div data-lang="CSS" class="marker"></div><pre>sudo systemctl restart nginx.service
</pre></div></code-block><div id="cz6Ui6HqW25nLYqqXz5k5Z" class="wolai-block wolai-text"><div><span class="inline-wrap"><i>提示：如果您遇到任何错误，请检查 </i></span><span class="inline-wrap"><i><code>sudo tail -f /var/log/nginx/error.log</code></i></span></div></div><div id="6MCo7PTooRvLEmGdwZWdKf" class="wolai-block wolai-text"><div><span class="inline-wrap">在 nginx 和配置文件的站点之间创建一个符号链接：</span></div></div><code-block id="oCB8WTgPgk1JTrZpa6xiDj" class="wolai-block"><div class="wolai-pre"><div data-lang="CSS" class="marker"></div><pre>sudo ln -s /etc/nginx/sites-available/yourhostname.conf /etc/nginx/sites-enabled/</pre></div></code-block><div id="bDbJeNGWcZ3Lr3XmV8gWxJ" class="wolai-block wolai-text"><div><span class="inline-wrap">如果一切都配置正确，您应该可以使用自签名证书（</span><span class="inline-wrap"><a href="https://my-hostname/"><span>即 https://my-hostname/</span></a></span><span class="inline-wrap">）访问本地网站。这是在发布 Web 应用程序之前在本地测试它的好方法。现在，你已创建一个本地开发环境，以使用 HTTPS 测试您的应用。</span></div></div><h3 id="6gFRu6vHb4txWZDLuKu4u6" class="wolai-block"><span class="inline-wrap">如何使用 OpenSSL 测试 SSL 连接</span></h3><div id="hwTrSnk4nd1aFebyj26goz" class="wolai-block wolai-text"><div><span class="inline-wrap">OpenSSL 工具包含许多实用程序。我们可以使用其中之一来验证与服务器的安全连接。为此，我们将使用该实用程序建立客户端到服务器的通信。因此，我们可以确定端口是否打开，服务器是否配置为支持 SSL，以及证书何时过期。</span><span class="inline-wrap"><code>s_client</code></span></div></div><div id="rinpytPsk9B3YDcFWgwrkq" class="wolai-block wolai-text"><div><span class="inline-wrap">在终端中，对具有 HTTPS 的 Web 服务器使用。</span><span class="inline-wrap"><code>s_client</code></span></div></div><h4 id="axz9GCqxqvyeAeUyC1oq9t" class="wolai-block"><span class="inline-wrap"><a href="https://cs-uob.github.io/COMSM0085/exercises/part2/encryption/openssl.html#what-are-the-differences-compared-to-other-tools-such-as-netcat-or-telnet"><span>与其他工具（如<span class="jill"></span>netcat<span class="jill"></span>或<span class="jill"></span>telnet）相比有什么区别？</span></a></span></h4><div id="3NR2grJwwNbpCEtqoStJXL" class="wolai-block wolai-text"><div><span class="inline-wrap">尝试使用 和 再次运行该命令。有什么区别？</span><span class="inline-wrap"><code>-crlf``-brief flags</code></span></div></div><div id="wxjCBoxq1A7MwHY2wd3DUk" class="wolai-block wolai-text"><div><span class="inline-wrap"><code>s_client</code></span><span class="inline-wrap"> 是 OpenSSL 中的一个实用程序，用于建立到 SSL/TLS 服务器的安全连接，并提供了一种方法来测试服务器的 SSL 配置和证书。与其他工具（如<span class="jill"></span>netcat<span class="jill"></span>或<span class="jill"></span>telnet）相比，</span><span class="inline-wrap"><code>s_client</code></span><span class="inline-wrap"> 更专注于 SSL/TLS 连接，并提供了更多的 SSL/TLS 相关功能和选项。</span></div></div><ul class="wolai-block"><li id="2YZzjChzen3Q2PQqCUjCEw"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>-crlf</code></span><span class="inline-wrap"> 标志表示使用 CRLF 作为行尾符号（\r\n），而不是默认的 LF（\n）。</span></li><li id="3fQSxN4xKoSotKNgytqPTv"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><code>-brief</code></span><span class="inline-wrap"> 标志表示以简洁模式运行 </span><span class="inline-wrap"><code>s_client</code></span><span class="inline-wrap">，只显示关键信息，减少冗余输出。</span></li></ul><div id="9RiPGgYbdc4ZtYN1qsQCrq" class="wolai-block wolai-text"><div><span class="inline-wrap">重新运行命令时，使用 </span><span class="inline-wrap"><code>-crlf</code></span><span class="inline-wrap"> 和 </span><span class="inline-wrap"><code>-brief</code></span><span class="inline-wrap"> 标志可能会导致不同的输出格式和信息显示。例如，简洁模式可能只显示关键的连接信息，而使用 CRLF 作为行尾符可能会更改显示的文本格式。</span></div></div><h1 id="nUZsLiDAGoLg5yLJFuWAyF" class="wolai-block"><span class="inline-wrap">7.2 </span><span class="inline-wrap"><a href="https://cs-uob.github.io/COMSM0085/exercises/part2/encryption/pgp.html#introduction-to-pgp-encryption"><span>PGP<span class="jill"></span>加密简介</span></a></span></h1><div id="7t3MYxKKwrYzZ2gjdNyKNN" class="wolai-block wolai-text"><div><span class="inline-wrap">本次实践实验课程旨在向您介绍 PGP（Pretty Good Privacy），这是一种广泛使用的加密软件，用于保护电子邮件通信和数据文件的安全。通过实践练习，您将学习如何生成 PGP 密钥对、加密和解密消息、签名和验证文件以及交换加密电子邮件。该实验室将提供使用 PGP 进行安全通信和数据保护的所有基本技能。</span></div></div><h2 id="rXMEwXothBWqnBCmh8DKMs" class="wolai-block"><span class="inline-wrap"><a href="https://cs-uob.github.io/COMSM0085/exercises/part2/encryption/pgp.html#objectives"><span>目标：</span></a></span></h2><ul class="wolai-block"><li id="nHxSV8BL5gZGDrBkZtzB3D"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">了解<span class="jill"></span>PGP<span class="jill"></span>加密和数字签名的原理。</span></li><li id="8AsK4aYNbW6Ueo6qViuZJ8"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">生成用于加密和签名的 PGP 密钥对。</span></li><li id="eK3gQGm3L42dtQTzXVrtB8"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">使用 PGP 加密和解密消息。</span></li><li id="xkVR2eC7Fvo4cp8HvnScxS"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">使用 PGP 数字签名对文件进行签名和验证。</span></li><li id="tgzCquYyxUv9VT1ioFRfkJ"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">与同学交换加密消息。</span></li></ul><h2 id="oSvsQ4G9D52PEA1cbyx4Ez" class="wolai-block"><span class="inline-wrap"><a href="https://cs-uob.github.io/COMSM0085/exercises/part2/encryption/pgp.html#generating-pgp-key-pairs-to-begin-gpg-tool-to-encrypt-all-the-communication-we-want"><span>生成 PGP 密钥对以启动 GPG 工具来加密我们想要的所有通信。</span></a></span></h2><div id="ib4PFT7eLPDx5fCLZnDugM" class="wolai-block wolai-text"><div><span class="inline-wrap">使用您的 VM 通过适当的命令进行安装</span><span class="inline-wrap"><code>gnupg</code></span><span class="inline-wrap">（如果尚未安装）。在 Debian 上是：</span></div></div><code-block id="9nSyCFzemG8R365M2g2HRW" class="wolai-block"><div class="wolai-pre"><div data-lang="CSS" class="marker"></div><pre>sudo apt-get install gnupg</pre></div></code-block><div id="6Um4jZJsjcJmoUKXoB5SxM" class="wolai-block wolai-text"><div><span class="inline-wrap">首先，使用以下命令创建密钥对：</span></div></div><code-block id="9K8jbgR7F2A6fEQo9FyA2U" class="wolai-block"><div class="wolai-pre"><div data-lang="CSS" class="marker"></div><pre>gpg <span class="token variable">--generate-key</span>
</pre></div></code-block><div id="u7yDkFsssaxyvhh1M1aDSw" class="wolai-block wolai-text"><div><span class="inline-wrap"><i>提示：不要忘记密码，请使用强度较高的密码！</i></span></div></div><div id="oL2Mxm35KG66hAJPxccnNo" class="wolai-block wolai-text"><div><span class="inline-wrap">您可以通过 GPG 应用程序导出您的公钥来发送它：</span></div></div><code-block id="tbvdxhkdVy5HMjdnFYy1Sb" class="wolai-block"><div class="wolai-pre"><div data-lang="CSS" class="marker"></div><pre>$ gpg <span class="token variable">--output</span> ~/mypub.key <span class="token variable">--armor</span> <span class="token variable">--export</span> youremail@mail.com
</pre></div></code-block><div id="sAgDiCSsC1Em1cbGNVFqsf" class="wolai-block wolai-text"><div><span class="inline-wrap">您可以通过电子邮件或您选择的任何方法发送密钥。</span></div></div><h2 id="bkDFw9dZxKA9RDYEmDX2cE" class="wolai-block"><span class="inline-wrap"><a href="https://cs-uob.github.io/COMSM0085/exercises/part2/encryption/pgp.html#how-to-import-locally-foreign-public-keys"><span>如何导入本地国外公钥</span></a></span></h2><div id="5wsDmPx5xs5iHPdR3rVjLh" class="wolai-block wolai-text"><div><span class="inline-wrap">如果我们想与其他用户通信，我们需要接受他们的公钥。当您收到别人的公钥时，通过该</span><span class="inline-wrap"><code>import</code></span><span class="inline-wrap">参数导入。</span></div></div><div id="ktkpgEmKEPkorZeiiGghqw" class="wolai-block wolai-text"><div><span class="inline-wrap"><i>提示：还有其他选项可以共享您的公钥，例如使用公钥服务器。以下是验证其他密钥的方法。</i></span></div></div><div id="DeUGwMmC25q1rQMK79321" class="wolai-block wolai-text"><div><span class="inline-wrap">虽然分发公钥通常是安全的，但从其他用户获取密钥时应小心谨慎。因此，在导入他人的密钥并开始通信之前验证他人的身份至关重要。实现此目的的一种快速方法是比较从这些密钥派生的指纹。使用以下命令：</span></div></div><code-block id="mVTcvQXBUtGuCoQjyxs5o3" class="wolai-block"><div class="wolai-pre"><div data-lang="CSS" class="marker"></div><pre>$ gpg <span class="token variable">--fingerprint</span> youremail@mail.com
</pre></div></code-block><div id="ikc5p3RcpeQgEeAwqzZJtk" class="wolai-block wolai-text"><div><span class="inline-wrap">这将产生更简洁的数字串，从而更容易进行比较。然后，我们可以与个人本人或有权访问该人的另一方验证该字符串。</span></div></div><h2 id="22bjWYCHPcRRV4NVcBNFZG" class="wolai-block"><span class="inline-wrap"><a href="https://cs-uob.github.io/COMSM0085/exercises/part2/encryption/pgp.html#now-sign-the-keys"><span>现在签署密钥</span></a></span></h2><div id="mcJ7BHijuF9AJ3ieXs37Ns" class="wolai-block wolai-text"><div><span class="inline-wrap">通过签署彼此的密钥，我们实质上表明了对我们拥有的密钥的信任，并确认了与该密钥相关的个人的身份。</span></div></div><code-block id="3oeZVeFN9dS9wc4y4hiENR" class="wolai-block"><div class="wolai-pre"><div data-lang="CSS" class="marker"></div><pre>$ gpg <span class="token variable">--sign-key</span> youremail@mail.com</pre></div></code-block><div id="vNZmbSn5JfRcD1oKDxjt67" class="wolai-block wolai-text"><div><span class="inline-wrap">为了确保您正在签署密钥的人从您的信任关系中受益，请将签名的密钥发回给他们。您可以通过键入以下内容来完成此操作：</span></div></div><code-block id="uvo5xmxLMD6rLvNeXqFhiB" class="wolai-block"><div class="wolai-pre"><div data-lang="CSS" class="marker"></div><pre>$ gpg <span class="token variable">--output</span> ~/signed.key <span class="token variable">--export</span> <span class="token variable">--armor</span> youremail@mail.com</pre></div></code-block><div id="tYEsUHsca1QoShhCeXYNbR" class="wolai-block wolai-text"><div><span class="inline-wrap">收到这个新签名的密钥后，他们可以导入它，将您生成的签名信息合并到他们的 GPG 数据库中。他们可以通过使用</span><span class="inline-wrap"><code>import</code></span><span class="inline-wrap">参数来实现这一点。</span></div></div><div id="hCvKw4MKrNbdVDv7EyWo4k" class="wolai-block wolai-text"><div><span class="inline-wrap">现在您已经建立了与受信任端进行通信的安全通道，您可以相互发送和接收加密消息！</span></div></div><div id="7acpeb7pLZUpN1coPCuxdU" class="wolai-block wolai-text"><div><span class="inline-wrap">与对方共享密钥后，您现在可以发送和接收加密消息。您可以使用以下命令加密您的消息：</span></div></div><code-block id="ng9jAAVUJQ5xT5BvU5koBt" class="wolai-block"><div class="wolai-pre"><div data-lang="CSS" class="marker"></div><pre>$ gpg <span class="token variable">--encrypt</span> <span class="token variable">--sign</span> <span class="token variable">--armor</span> -r other_person@mail.com file_name</pre></div></code-block><div id="bg4RCHn281iYUgh2JetWm7" class="wolai-block wolai-text"><div><span class="inline-wrap">此命令会对消息进行加密并使用您的私钥对其进行签名，以确保该消息来自您。输出将是一个扩展名为</span><span class="inline-wrap"><code>.asc</code></span><span class="inline-wrap">.您可以使用该</span><span class="inline-wrap"><code>cat</code></span><span class="inline-wrap">命令来查看该文件。</span></div></div><div id="4eH2Cy9LuwY9sGpKAyzPri" class="wolai-block wolai-text"><div><span class="inline-wrap">请记住，此消息将使用收件人的公钥进行加密，从而使您无法读取该消息（除非您以某种方式获得了收件人的私钥！）。</span></div></div><div id="cUz8xHae4TmNdgXS5y7DBW" class="wolai-block wolai-text"><div><span class="inline-wrap"><i>提示：您可以修改上面的命令，使用您的私钥生成一条只有您可以读取的消息。想想如何。</i></span></div></div><h2 id="4qz5NaF5iBvY3JLpoH75K7" class="wolai-block"><span class="inline-wrap"><a href="https://cs-uob.github.io/COMSM0085/exercises/part2/encryption/pgp.html#decrypt-received-messages"><span>解密收到的消息</span></a></span></h2><div id="gTWP6aM1gprMCPeavVkBSX" class="wolai-block wolai-text"><div><span class="inline-wrap">收到消息后，您将能够读取命令</span><span class="inline-wrap"><code>gpg</code></span><span class="inline-wrap">和</span><span class="inline-wrap"><code>decrypt</code></span><span class="inline-wrap">参数。</span></div></div><div id="521jzaGRGavAknuTLHsFK5" class="wolai-block wolai-text"><div><span class="inline-wrap"><i>提示：如果您有原始流文本消息，请在</i></span><span class="inline-wrap"><i><code>gpg</code></i></span><span class="inline-wrap"><i>不带任何参数的情况下键入后粘贴该消息。然后按</i></span><span class="inline-wrap"><i><code>CTRL+D</code></i></span><span class="inline-wrap"><i>结束消息。</i></span></div></div><div id="nhT6kCaqNbRy3wYdVQHrqD" class="wolai-block wolai-text"><div><span class="inline-wrap">如果您已正确完成上述所有步骤，您现在可以与不同的人安全地进行通信。您可以将公钥发送给多个收件人，也可以导入多个密钥。这是保持消息私密性并保护敏感信息免遭窃听攻击的重要步骤。</span></div></div><h2 id="3TfWHGoom4okKutwRjf6qF" class="wolai-block"><span class="inline-wrap"><a href="https://cs-uob.github.io/COMSM0085/exercises/part2/encryption/pgp.html#import-other-peoples-public-keys-from-a-public-key-server"><span>从公钥服务器导入其他人的公钥</span></a></span></h2><div id="bNaCWhxmiF53sUtEqfAcqs" class="wolai-block wolai-text"><div><span class="inline-wrap">共享 GPG 密钥的另一种方法是通过公钥服务器。任何人都可以将密钥上传到公共服务器，以便其他可能需要与您安全通信的人可以访问该密钥。</span></div></div><div id="ozZ4FaFghcpJbiJLDrszZf" class="wolai-block wolai-text"><div><span class="inline-wrap">使用以下方法导出您的公钥：</span></div></div><code-block id="gJ1is5c2MBH3oNirs6PG1s" class="wolai-block"><div class="wolai-pre"><div data-lang="CSS" class="marker"></div><pre>$ gpg <span class="token variable">--armor</span> <span class="token variable">--export</span> email</pre></div></code-block><div id="dDdd7SQvgwtzUSCxWjGkoY" class="wolai-block wolai-text"><div><span class="inline-wrap">使用该参数将您的公钥发送到公共服务器</span><span class="inline-wrap"><code>--send-key</code></span><span class="inline-wrap">。默认情况下，您的密钥将发送到</span><span class="inline-wrap"><a href="https://keys.openpgp.org/"><span>https://keys.openpgp.org/</span></a></span><span class="inline-wrap">，或者您可以使用该选项指定不同的密钥服务器</span><span class="inline-wrap"><code>--keyserver</code></span><span class="inline-wrap">。</span></div></div><div id="2ASeDNWyQdxDb2tz9mQPr5" class="wolai-block wolai-text"><div><span class="inline-wrap">在导入用户密钥之前，请使用命令验证其有效性，</span><span class="inline-wrap"><code>gpg --list-sigs user_id</code></span><span class="inline-wrap">其中 是</span><span class="inline-wrap"><code>user_id</code></span><span class="inline-wrap">您要通信的电子邮件地址。要在公钥服务器上查找密钥，请使用</span><span class="inline-wrap"><code>--search</code></span><span class="inline-wrap">参数。</span></div></div><div id="nZ9FkoHqGVcqAqw3W9qnxt" class="wolai-block wolai-text"><div><span class="inline-wrap">使用参数导入您想要的密钥</span><span class="inline-wrap"><code>--import</code></span><span class="inline-wrap">。您可以使用该参数再次验证发件人的身份 </span><span class="inline-wrap"><code>--fingerprint</code></span><span class="inline-wrap">，并通过第二个通道检查其有效性。然后，同样对从公钥服务器获取的密钥进行签名。</span></div></div><h3 id="vdz3uMpJ9fAmbHv9vJL6nf" class="wolai-block"><span class="inline-wrap"><a href="https://cs-uob.github.io/COMSM0085/exercises/part2/encryption/pgp.html#here-you-can-find-some-key-ids-of-people-you-may-certainly-know"><span>在这里您可以找到您可能认识的人的一些关键 ID：</span></a></span></h3><ul class="wolai-block"><li id="4L4Mp6U3FMP64UcTQMk2sF"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><b>413109AF27CBFBF9</b></span><span class="inline-wrap"> ,</span></li><li id="nyaCbCE32Q8oJg8XuKwe4A"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><b>9A88F479F6D1BBBA</b></span><span class="inline-wrap"> ,</span></li><li id="o7HGmooy7Moyc7hFWGRcUy"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap"><b>1C29680110FA7E87</b></span></li></ul><div id="xpQuT6kHbNW12AMwhtr9XZ" class="wolai-block wolai-text"><div><span class="inline-wrap">这些密钥位于</span><span class="inline-wrap"><a href="http://keyserver.ubuntu.com//"><span>http://keyserver.ubuntu.com//</span></a></span><span class="inline-wrap">公钥服务器上。</span></div></div><ul class="wolai-block"><li id="iDKeVmQQSQgZ291UY7Qeao"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">使用</span><span class="inline-wrap"><code>gpg</code></span><span class="inline-wrap">带有</span><span class="inline-wrap"><code>--search</code></span><span class="inline-wrap">参数的命令来查找每个键关联的电子邮件地址或用户 ID（用户名）。</span></li><li id="qwL3WUcyXKDusbK4vbKsdE"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">如果您决定将密钥导入密钥环，请使用</span><span class="inline-wrap"><code>gpg</code></span><span class="inline-wrap">带有参数的命令。</span><span class="inline-wrap"><code>--recv-keys</code></span></li><li id="gYVGnjuQmm5yzWXcH7yVCv"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">使用</span><span class="inline-wrap"><code>gpg</code></span><span class="inline-wrap">带有</span><span class="inline-wrap"><code>--fingerprint</code></span><span class="inline-wrap">选项的命令来验证密钥的真实性。</span></li><li id="4tAg2xZ7WcweAbmPNvRbjX"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">现在，您可以尝试根据电子邮件地址进行搜索吗？</span></li><li id="srMKXoKR3fYgkCRcemSwcU"><div class="marker"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 14.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"></path></svg></div><span class="inline-wrap">你能找到约瑟夫过期的旧钥匙吗？</span></li></ul><code-block id="aA1LvHrBVYg7YrKtjhKvzc" class="wolai-block"><div class="wolai-pre"><div data-lang="CSS" class="marker"></div><pre># 使用 gpg 带有 <span class="token variable">--search</span> 参数的命令来查找每个键关联的电子邮件地址或用户 ID（用户名）
gpg <span class="token variable">--search</span> <span class="token string">"user@example.com"</span>

# 如果您决定将密钥导入密钥环，请使用 gpg 带有参数的命令。--recv-keys
gpg <span class="token variable">--recv-keys</span> ABCDEF1234567890

# 使用 gpg 带有 <span class="token variable">--fingerprint</span> 选项的命令来验证密钥的真实性。
gpg <span class="token variable">--fingerprint</span> ABCDEF1234567890

# 现在，您可以尝试根据电子邮件地址进行搜索吗？
gpg <span class="token variable">--search</span> <span class="token string">"joseph@example.com"</span>

# 你能找到约瑟夫过期的旧钥匙吗？
</pre></div></code-block><div id="dkhrK4Lp9yU5qNkYpiD5BT" class="wolai-block wolai-text"><div><span class="inline-wrap">要找到约瑟夫过期的旧密钥，您可以执行以下步骤：</span></div></div><ol class="wolai-block"><li id="4t9X2rtgkexpLsSZMbmyJL"><div class="marker"></div><span class="inline-wrap">查看已导入的密钥列表，以确定哪些密钥属于约瑟夫。</span></li><li id="o2hZ3fsMhzVBUvHCESLT9N"><div class="marker"></div><span class="inline-wrap">使用 </span><span class="inline-wrap"><code>gpg --list-keys</code></span><span class="inline-wrap"> 命令列出所有已导入的密钥。</span></li><li id="iQwDs8AEXMfCa4tGxjjEqZ"><div class="marker"></div><span class="inline-wrap">根据密钥的用户 ID（用户名或电子邮件地址）或指纹识别符识别约瑟夫的旧密钥。</span></li><li id="rUwibUaJKaqEWZKC7zDun5"><div class="marker"></div><span class="inline-wrap">找到约瑟夫的旧密钥后，您可以验证其过期状态。</span></li></ol><div id="wnofTs3ZRQY1GV3rEGWMTg" class="wolai-block wolai-text"><div><span class="inline-wrap">下面是一些可能有用的命令示例：</span></div></div><code-block id="5SwsC3MUJE47BqyksX2eaK" class="wolai-block"><div class="wolai-pre"><div data-lang="Bash" class="marker"></div><pre><span class="token comment"># 列出所有已导入的密钥</span>
gpg --list-keys

<span class="token comment"># 查找包含“joseph”的用户 ID 的密钥</span>
gpg --list-keys <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"joseph"</span>

<span class="token comment"># 查找指纹为 ABCDEF1234567890 的密钥</span>
gpg --list-keys <span class="token parameter variable">--fingerprint</span> ABCDEF1234567890</pre></div></code-block><div id="xanRucRRApkGSgJgPiajQA" class="wolai-block wolai-text"><div><span class="inline-wrap">通过查看密钥列表并验证密钥的状态，您可以确定约瑟夫的旧密钥是否过期。</span></div></div><div id="mGcxaG3feKHuq7N42QjytS" class="wolai-block wolai-text"><div></div></div></article><footer></footer></body></html>